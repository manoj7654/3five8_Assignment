<!DOCTYPE html>
<html>
<head>
  <title>Facility Booking</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    body {
  font-family: Arial, sans-serif;
  margin: 20px;
  background-color: grey;
}
#bookingForm{
    /* border: 1px solid red; */
    padding-left: 100px;
    padding-top: 20px;
    padding-bottom: 30px;
    border-radius: 10px;
    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
    background-color: white;
}
h1 {
  text-align: center;
}

form {
  width: 400px;
  margin: 0 auto;
}

label,
input,
button {
  display: block;
  margin: 10px 0;
}
input{
    width: 70%;
    height: 30px;
}

button {
    width: 72%;
    height: 35px;
    font-size: 20px;
    background-color: rgb(17, 90, 17);
    color:white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}

  </style>
</head>
<body>
  <h1>Facility Booking</h1>
  <form id="bookingForm">
    <label for="facility">Facility:</label>
    <input type="text" id="facility" name="facility" required>
    <label for="date">Date:</label>
    <input type="date" id="date" name="date" required>
    <label for="startTime">Start Time:</label>
    <input type="time" id="startTime" name="startTime" required>
    <label for="endTime">End Time:</label>
    <input type="time" id="endTime" name="endTime" required>
    <label for="amount">Amount:</label>
    <input type="number" id="amount" name="amount" required>
    <button type="submit">Book Facility</button>
  </form>
  <script src="script.js"></script>
</body>
</html>
<script>
  const bookingForm = document.getElementById('bookingForm');

  const timeDifference=(startTime,endTime)=>{
  const [hour1,minutes1]=startTime.split(":").map(Number)
  const [hour2,minutes2]=endTime.split(":").map(Number);

  let totalMinutes1=hour1*60+minutes1;
  let totalMinutes2=hour2*60+minutes2

  let totalDifferenceInMinutes=totalMinutes2-totalMinutes1

  if(totalDifferenceInMinutes<0){
    totalDifferenceInMinutes+=24*60
  }
// Convert the time difference to hours
const differenceInHours = totalDifferenceInMinutes / 60;

return differenceInHours;
}

let Amount=0;
    //  for clubhouse finding amount
    if(facility=="Clubhouse"){
      if(startTime>="10:00"&& endTime<="16:00"){
        Amount+=timeDifference(startTime,endTime)*100
      }else if(startTime>="16:00"&& endTime<="22:00"){
        Amount+=timeDifference(startTime,endTime)*500
        
      }
    }

//  for tennis court finding amount
    if(facility=="Tennis Court"){
        Amount+=timeDifference(startTime,endTime)*50
      
    
    }

   bookingForm.addEventListener('submit', async (e) => {
   e.preventDefault();

  const facility = document.getElementById("facility").value;
  const date = document.getElementById("date").value;
  const startTime = document.getElementById("startTime").value;
  const endTime = document.getElementById("endTime").value;
  

  let obj={
    facility,
    date,
    startTime,
    endTime
  }
console.log(obj)
  const result = await fetch('http://localhost:8080/book', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(obj),
  });

  const data = await result.json();

  if (result.ok) {
    alert(`Booking successful. Amount: Rs. ${data.amount}`);
  } else {
    alert(data.message);
  }
});

</script>